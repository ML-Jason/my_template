webpackJsonp([3],{36:function(t,o,e){e(55);var a=e(6)(e(40),e(51),"data-v-edbf659e",null);t.exports=a.exports},40:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=e(1);o.default={data:function(){return{reponame:"",collaborators:[],collaboratorsDisplay:[],colSelected:[],autoinit:!1}},watch:{colSelected:function(t){for(var o=this,e=0;e<this.collaborators.length;e++){var a=function(e){var a=!1;if(t.forEach(function(t){t===o.collaborators[e].login&&(a=!0)}),!a&&"admin"!==o.me.role)return o.colSelected.push(o.collaborators[e].login),{v:swal("Oops...","你沒有權限移除原有的協作者喔","error")}}(e);if("object"===(void 0===a?"undefined":l(a)))return a.v}return""}},computed:a({},(0,i.mapGetters)(["me","userlist"]),{title:function(){return"add"===this.$route.params.type?"新增Repository":"Repository資料"},subtitle:function(){return""}}),methods:a({},(0,i.mapMutations)(["setCoverloading"]),(0,i.mapActions)(["addRepo","updateRepo","getuserlist","loadRepo","loadCollaborators"]),{onCancel:function(){this.$router.push("/repos")},onSubmit:function(){var t=this,o={},e="updateRepo";return"add"===this.$route.params.type?(e="addRepo",o.init="no",this.autoinit&&(o.init="yes")):o.oname=this.$route.params.type,""===this.reponame?swal("Oops..","請填寫Repository的名稱","error"):(o.name=this.reponame,o.cols=this.colSelected.join(),swal({title:"",text:"送出中",type:"info",allowOutsideClick:!1,showConfirmButton:!1}),this[e](o).then(function(o){swal.close(),"OK"===o.status?t.$router.push("/repos"):swal("Oops",o.err.message,"error")}))},dealCollaboratorsList:function(){var t=this;this.userlist.forEach(function(o){t.collaboratorsDisplay.push({login:o.login,avatar_url:o.avatar_url,email:o.email,check:!1})}),this.collaborators.forEach(function(o){for(var e=!1,a=0;a<t.collaboratorsDisplay.length;a++){var l=t.collaboratorsDisplay[a];if(l.login===o.login){e=!0,l.check=!0,t.colSelected.push(o.login);break}}e||(t.collaboratorsDisplay.push({login:o.login,avatar_url:o.avatar_url,check:!0}),t.colSelected.push(o.login))}),this.setCoverloading(!1)},fetchData:function(t){var o=this,e=t||this.$route.params.type;return"add"===e?this.dealCollaboratorsList():(this.reponame=e,this.loadCollaborators(this.reponame).then(function(t){"OK"===t.status&&(t.data.forEach(function(t){"MedialandDev"!==t.login&&o.collaborators.push({login:t.login,avatar_url:t.avatar_url})}),o.dealCollaboratorsList())}))}}),beforeRouteUpdate:function(t,o,e){this.reponame="",this.collaborators=[],this.collaboratorsDisplay=[],this.colSelected=[],this.autoinit=!1,e(),this.setCoverloading(!0),this.fetchData(t.params.type)},created:function(){var t=this;setTimeout(function(){t.setCoverloading(!0),0===t.userlist.length?t.getuserlist().then(function(){t.fetchData()}):t.fetchData(),$(t.$el).find("input").eq(0).focus()},30)},beforeDestroy:function(){}}},47:function(t,o,e){o=t.exports=e(5)(),o.push([t.i,".form-group small[data-v-edbf659e]{color:#9e9e9e}.x_title h3[data-v-edbf659e]{margin:5px 0 6px;float:left;display:block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.input-group[data-v-edbf659e],button[data-v-edbf659e]{margin-bottom:0}.cppwd[data-v-edbf659e]{cursor:pointer}.collaboratorsbox[data-v-edbf659e]{width:50%;float:left;padding-top:0}.collaboratorsbox>label[data-v-edbf659e]{width:100%}.collaborators[data-v-edbf659e]{display:table-cell;padding:8px;line-height:1.42857143;vertical-align:middle;width:100%;float:left;cursor:pointer}.collaboratorsbox[data-v-edbf659e]:hover{background-color:#e0f2f1}.collaborators>div[data-v-edbf659e]{float:left}.collaborators input[data-v-edbf659e]{margin-top:14px}.gitprofilepic[data-v-edbf659e]{width:40px;border-radius:5px;overflow:hidden}.gitprofilepic>img[data-v-edbf659e]{width:100%}.collaboratorsInfo[data-v-edbf659e]{margin-left:10px}.collaboratorsLogin[data-v-edbf659e]{font-weight:700}",""])},51:function(t,o){t.exports={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"x_panel"},[e("div",{staticClass:"x_title"},[e("h3",[t._v(t._s(t.title))]),e("div",{staticClass:"clearfix"})]),e("div",{staticClass:"x_content"},[e("form",{staticClass:"form-horizontal form-label-left"},[e("div",{staticClass:"form-group"},[t._m(0),e("div",{staticClass:"col-sm-7 col-xs-12"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.reponame,expression:"reponame",modifiers:{trim:!0}}],staticClass:"form-control col-md-7 col-xs-12",attrs:{id:"auto",type:"text"},domProps:{value:t.reponame},on:{keyup:function(o){if(!("button"in o)&&t._k(o.keyCode,"enter",13))return null;t.onSubmit(o)},input:function(o){o.target.composing||(t.reponame=o.target.value.trim())},blur:function(o){t.$forceUpdate()}}}),t._m(1)])]),"add"===t.$route.params.type?e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label col-sm-3 col-xs-12"},[t._v("是否要自動init")]),e("div",{staticClass:"col-sm-7 col-xs-12"},[e("div",{staticClass:"checkbox"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoinit,expression:"autoinit"}],attrs:{type:"checkbox",value:"true"},domProps:{checked:Array.isArray(t.autoinit)?t._i(t.autoinit,"true")>-1:t.autoinit},on:{__c:function(o){var e=t.autoinit,a=o.target,l=!!a.checked;if(Array.isArray(e)){var i=t._i(e,"true");l?i<0&&(t.autoinit=e.concat("true")):i>-1&&(t.autoinit=e.slice(0,i).concat(e.slice(i+1)))}else t.autoinit=l}}}),t._v("自動Init")]),t._m(2)])])]):t._e(),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label col-sm-3 col-xs-12"},[t._v("協作者")]),e("div",{staticClass:"col-sm-7 col-xs-12"},t._l(t.collaboratorsDisplay,function(o){return e("div",{key:o.login,staticClass:"checkbox collaboratorsbox"},[e("label",[e("div",{staticClass:"collaborators"},[e("div",{staticClass:"collaboratorscheck"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colSelected,expression:"colSelected"}],attrs:{type:"checkbox"},domProps:{value:o.login,checked:Array.isArray(t.colSelected)?t._i(t.colSelected,o.login)>-1:t.colSelected},on:{__c:function(e){var a=t.colSelected,l=e.target,i=!!l.checked;if(Array.isArray(a)){var r=o.login,s=t._i(a,r);i?s<0&&(t.colSelected=a.concat(r)):s>-1&&(t.colSelected=a.slice(0,s).concat(a.slice(s+1)))}else t.colSelected=i}}})]),e("div",{staticClass:"gitprofilepic"},[e("img",{attrs:{src:o.avatar_url}})]),e("div",{staticClass:"collaboratorsInfo"},[e("div",{staticClass:"collaboratorsLogin"},[t._v(t._s(o.login))]),e("div",{staticClass:"collaboratorsEmail"},[e("small",[t._v(t._s(o.email))])])])])])])}))]),e("div",{staticClass:"ln_solid"}),e("div",{staticClass:"col-xs-12 flex-cc"},[e("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.onCancel}},[t._v("取消")]),e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.onSubmit}},[t._v("送出")])])])])])])])])},staticRenderFns:[function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("label",{staticClass:"control-label col-sm-3 col-xs-12"},[t._v("Repo名稱"),e("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("small",[t._v("為了方便識別專案，請盡量依照「年_月_客戶_專案名稱」的方式來命名。"),e("br"),t._v("所有人都有權限開啟GitHub，並加入協作者，但只有Admin才有權限移除協作者。")])},function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("p",[e("small",[t._v("如果選擇自動Init，第一次請用clone。")])])}]}},55:function(t,o,e){var a=e(47);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(7)("cc848c06",a,!0)}});